<!DOCTYPE html>
<html>
<head>
<title>joystick-html5</title>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, user-scalable=no"/>
<meta property="og:title"       content="joystick-html5"/>
<meta property="og:url"         content="http://jquery-element.github.io/joystick-html5/"/>
<meta property="og:image"       content="http://jquery-element.github.io/joystick-html5/thumbnail.jpg"/>
<meta property="og:description" content="A tiny HTML5 joystick for mobile purpose."/>
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css"/>
<link rel="stylesheet" href="https://mr21.github.io/_/header.css"/>
<script src="//code.jquery.com/jquery-3.0.0-alpha1.min.js"></script>
<script src="../dist/jquery-element-1.7.0.js"></script>
<script src="https://mr21.github.io/_/header.js"></script>
<script src="joystick.js"></script>
<style>
#container {
	position: relative;
	margin: 35px auto;
	width: 450px;
	height: 250px;
	border-radius: 4px;
	background: #222;
	}
.side {
	position: absolute;
	bottom: 20px;
	font-weight: bold;
	}
.left  { color: #afa; left: 20px; }
.right { color: #aaf; right: 20px; }
.joystick {
	margin-top: 25px;
	}
</style>
<script>
$( function() {

	var jqData = $( "#container span" );

	function setCoord( x, y, rx, ry, side ) {
		function f( ind, v ) {
			jqData.eq( ind ).text( ~~( v * 100 ) / 100 );
		}
		f( 0 + side * 4,  x );
		f( 1 + side * 4,  y );
		f( 2 + side * 4, rx );
		f( 3 + side * 4, ry );
	}

	$( ".left .joystick" ).element().init({
		move:    function( x, y, rx, ry ) { setCoord( x, y, rx, ry, 0 ); },
		hold:    function() { setCoord( 0, 0, 0, 0, 0 ); },
		release: function() { setCoord( 0, 0, 0, 0, 0 ); }
	});

	$( ".right .joystick" ).element().init({
		move:    function( x, y, rx, ry ) { setCoord( x, y, rx, ry, 1 ); },
		hold:    function() { setCoord( 0, 0, 0, 0, 1 ); },
		release: function() { setCoord( 0, 0, 0, 0, 1 ); }
	});
});
</script>
</head>
<body>

	<div id="header">
		<i class="fa fa-fw fa-gamepad"></i>
		<h1>joystick-html5</h1>
	</div>

	<div id="container">
		<div class="side left">
			x: <span></span><br/>
			y: <span></span><br/>
			rx: <span></span><br/>
			ry: <span></span><br/>
			<div data-jquery-element="joystick"></div>
		</div>
		<div class="side right">
			x: <span></span><br/>
			y: <span></span><br/>
			rx: <span></span><br/>
			ry: <span></span><br/>
			<div data-jquery-element="joystick"></div>
		</div>
	</div>

</body>
</html>
